(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(18)},18:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),c=n(11),i=n(12),o=n(15),s=n(13),u=n(16),f=n(8),d=n(1),l=n.n(d),p=n(14),v=n.n(p),m=n(2);n(36);m.f("webgl");var h=[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64]];function w(){return(w=Object(f.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.d("http://127.0.0.1:8080/model.json");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var b=function(){return w.apply(this,arguments)}(),g=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).videoRef=l.a.createRef(),n.canvasRef=l.a.createRef(),n.detectFrame=function(e,t){m.b().startScope();var a=t.predict(n.process_input(e));n.renderPredictions(a),requestAnimationFrame(function(){n.detectFrame(e,t)}),m.b().endScope()},n.renderPredictions=function(){var e=Object(f.a)(r.a.mark(function e(t){var a,c,i,o,s,u,f,d,l,p,v,w,b,g;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[480,480],c=0,i=m.c.resizeBilinear(t.transpose([0,2,3,1]),a),o=i.argMax(3).reshape(a),s=o.shape.slice(0,1),u=o.shape.slice(1,2),e.next=8,o.data();case 8:f=e.sent,d=new Uint8ClampedArray(s*u*4),l=0;case 11:if(!(l<u*s)){e.next=31;break}if(p=f[l],v=4*l,-1!==p){e.next=21;break}d[v+0]=255,d[v+1]=255,d[v+2]=255,d[v+3]=255,e.next=28;break;case 21:if(w=h[p+c]){e.next=24;break}throw new Error("No color could be found for part id ".concat(p));case 24:d[v+0]=w[0],d[v+1]=w[1],d[v+2]=w[2],d[v+3]=255;case 28:++l,e.next=11;break;case 31:b=new ImageData(d,s,u),(g=n.canvasRef.current.getContext("2d")).scale(1.5,1.5),g.putImageData(b,520,60);case 35:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var t=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then(function(t){return window.stream=t,e.videoRef.current.srcObject=t,new Promise(function(t,n){e.videoRef.current.onloadedmetadata=function(){t()}})});Promise.all([b,t]).then(function(t){e.detectFrame(e.videoRef.current,t[0])}).catch(function(e){console.error(e)})}}},{key:"process_input",value:function(e){var t=m.a.fromPixels(e).toFloat(),n=m.e(255),a=m.g([.485,.456,.406],[1,1,3]),r=m.g([.229,.224,.225],[1,1,3]);return t.div(n).sub(a).div(r).transpose([2,0,1]).expandDims()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Real-Time Semantic Segmentation"),l.a.createElement("h3",null,"Refine Net"),l.a.createElement("video",{style:{height:"600px",width:"480px"},className:"size",autoPlay:!0,playsInline:!0,muted:!0,ref:this.videoRef,width:"480",height:"480"}),l.a.createElement("canvas",{className:"size",ref:this.canvasRef,width:"960",height:"480"}))}}]),t}(l.a.Component),x=document.getElementById("root");v.a.render(l.a.createElement(g,null),x)},30:function(e,t){},31:function(e,t){},32:function(e,t){},33:function(e,t){},34:function(e,t){},35:function(e,t){},36:function(e,t,n){}},[[17,2,1]]]);
//# sourceMappingURL=main.b20286ec.chunk.js.map